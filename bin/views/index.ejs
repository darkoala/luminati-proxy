<%- include header -%>
<div class=row>
  <div class=col-md-12>
    <div class=box>
      <div class=box-header>
        <h3 class=box-title>Available Local Proxies</h3>
      </div>
      <div class="box-body no-padding">
        <table class="table table-striped">
          <tr>
            <th style="width: 4em">Port</th>
            <th>Settings</th>
            <th>Progress</th>
            <th style="width: 40px">Label</th>
          </tr>
	  <% proxies.forEach(proxy=>{ %>
            <tr data-toggle=modal data-target="#proxy<%= proxy.port %>">
              <td><%= proxy.port %></td>
              <td><%= proxy.display_opt %></td>
              <td>
                <div class="progress progress-xs">
                  <div class="progress-bar progress-bar-danger" style="width: 55%"></div>
                </div>
              </td>
              <td><span class="badge bg-red">55%</span></td>
            </tr>
	  <% }); %>
        </table>
      </div>
    </div>
  </div>
</div>
<button type=button class="btn btn-success" data-toggle=modal data-target=#new_proxy>New</button>
<div class="modal fade" id=new_proxy tabindex=-1 role=dialog>
  <div class=modal-dialog>
    <div class=modal-content>
      <div class=modal-header>
        <button type=button class=close data-dismiss=modal aria-label=Close>
          <span aria-hidden=true>&times;</span>
        </button>
        <h4 class=modal-title>New Proxy</h4>
      </div>
      <div class=modal-body>
        <%- include('./properties.ejs', {proxy: {zone: 'gen', dns: 'local'}}); %>
      </div>
      <div class=modal-footer>
	<button class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>
</div>
<% proxies.forEach(proxy=>{ %>
  <div class="modal fade" id="proxy<%= proxy.port %>" tabindex=-1 role=dialog>
    <div class=modal-dialog>
      <div class=modal-content>
        <div class=modal-header>
          <button type=button class=close data-dismiss=modal aria-label=Close>
            <span aria-hidden=true>&times;</span>
          </button>
          <h4 class=modal-title>Proxy Properties</h4>
        </div>
        <div class=modal-body>
          <%- include('./properties.ejs', {proxy: proxy}); %>
        </div>
        <div class=modal-footer>
          <button class="btn btn-primary">Save</button>
        </div>
      </div>
    </div>
  </div>
<% }); %>
<%- include footer -%>
